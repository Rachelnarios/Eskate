<html>
<body>
    <h2> User Trip History </h2>
    <h2> <a href="index.html"> Go Back to Map </a> </h2>

    <h2>
    <table id="div1">

      <button onclick="myFunction()">History</button>
    </table>
  </h2>
  </body>

  <script>
  function myFunction() {
    var person = prompt("Please enter your name", "");
    if (person != null) {
        find(person)
    }
}

  function find(person){
     var request = new XMLHttpRequest();
      request.open("GET", "/users", false);
      request.send(null)
      var node2 = document.createTextNode("N/A") ;
      var para = document.createElement("p");
      var users= JSON.parse(request.responseText);
      //console.log(users)
      for(let i =0; i < users.length; i++){
        if(users[i].username === person){
        //  console.log (users[i].username);
        var para = document.createElement("p");
        var node = document.createTextNode((users[i].username) +"   |   ") ;
        var node1 = document.createTextNode((users[i].email) +"   |   ") ;
        console.log(users[i].history_trips)

        if(users[i].history_trips.length > 0){
          let a = []

          for(var j = 0; j<users[i].history_trips[i].length;j++){
            a.append(users[i].history_trips[j])
          }
        var node2= document.createTextNode(a) ;
        }

        para.appendChild(node);
        para.appendChild(node1);
        para.appendChild(node2);
        var element = document.getElementById("div1");
        element.appendChild(para);


    }
}
}
  </script>
</html>
