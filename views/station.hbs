<body style="text-align: left">
    <p> Running Map Reduce </p>

    <table class="container">

        <tr >
          <p>Steps</p>
        <!-- //  <li> 1. Click on Download trips.txt     <button type="submit" onclick="window.open('land')">  Download trips.txt file</button> </li> -->
            <!-- <li> 1.Go here to save the file <button type="submit" onclick="window.open('https://raw.githubusercontent.com/Rachelnarios/Eskate/master/trips.txt')"> User Sample Raw Text</li> -->
          <li> 1. Go to terminal and run MapReduce commands </li>
          <ul > 1.1  Change the input and output file path in the script <a href="https://raw.githubusercontent.com/Rachelnarios/Eskate/master/MapReduce/skate.sh" target="_blank"> skate.sh </a> to adapt to the admin's local file system </ul>
          <ul> 2. Run the script with provided password and <a href="https://raw.githubusercontent.com/Rachelnarios/Eskate/master/trips.txt" target="_blank"> trips.txt </a> to start MapReduce </ul>
          <li> 3. Click on Update and copy paste into terminal <ul> NOTE NAME_OF_YOUR_FILE is a place holder for new json file given from the mapreduce job. <button type="submit" onclick="myFunction()"> Update</button></ul>
</li>
          <li> 4. Go to view all users to see Mapreduce in action   <button type="submit" onclick="window.open('land')">  View All Trips</button> </li></li>

  </body>

  <script>
  function myFunction() {
    var request = new XMLHttpRequest();
    request.open("GET", "/read", false);
    request.send(null)
    var person = prompt("Run the following command on your terminal:","mongoimport -h ds123400.mlab.com:23400 -d eskates -c users -u me1 -p xyz123 --file NAME_OF_YOUR_FILE.json");

}
function down(){
  var request = new XMLHttpRequest();
  request.open("GET", "/download", false);
  request.send(null)
}
  var input = document.getElementById("myFile");
  var output = document.getElementById("output");


  input.addEventListener("change", function () {
    if (this.files && this.files[0]) {
      var myFile = this.files[0];
      var reader = new FileReader();

      reader.addEventListener('load', function (e) {
        output.textContent = e.target.result;
      });

      reader.readAsBinaryString(myFile);
    }
  });


  // when document is ready
        document.getElementById("save").onclick = function() {
            // when clicked the button
            var content = document.getElementById('source').value;
            // a [save as] dialog will be shown
            window.open("data:application/txt," + encodeURIComponent(content), "_self");
        }
  </script>
